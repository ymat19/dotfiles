# prefix settings
set -g prefix C-f
unbind C-b

# toggle prefix on/off with C-s
bind -n C-s if-shell -F '#{!=:#{prefix},None}' \
  'set -g prefix None ; bind -n C-f send-keys C-f' \
  'set -g prefix C-f ; unbind -n C-f'

# key bindings
bind v split-window -h
bind - split-window -v
bind x kill-pane
bind r source-file ~/.config/tmux/tmux.conf \; display-message "Reloaded"
bind y set-window-option synchronize-panes
bind t split-window -v -l 30%

# enable color
set-option -g default-terminal screen-256color
set -g terminal-overrides 'xterm:colors=256'​

# https://qiita.com/mnishiguchi/items/b8526fecd69aa87d2f7e
# OS が Linux の時は xsel を使う
if-shell -b '[ "$(uname)" = "Linux" ]' {
  set -s copy-command "xsel --clipboard --input"
}

# OS が Darwin の時は pbcopy を使う
if-shell -b '[ "$(uname)" = "Darwin" ]' {
  set -s copy-command "pbcopy"
}

# copy-pipe と競合する場合があるので無効化
set -s set-clipboard on

# コピーモード中に Vim 風に v で選択範囲を定める
bind -Tcopy-mode-vi v send -X begin-selection

# コピーモード中に Vim 風に y で選択範囲をヤンクしてコピーモードを終了する
bind -Tcopy-mode-vi y send -X copy-pipe-and-cancel

set -g mouse on              # スクロールのために必要
bind -T root MouseDown1Pane if-shell -F "#{||:}" " " " "   # 左クリック無効化
#bind -T root MouseDrag1Pane if-shell -F "#{||:}" " " " "   # ドラッグ無効化
#bind -T root MouseUp1Pane   if-shell -F "#{||:}" " " " "   # クリック後の処理も無効化

# suggest by nvim checkhealth
set-option -sg escape-time 10

set-option -g status-position top

# override message styles for better readability
set -g message-style "bg=#414868,fg=#c0caf5"
set -g message-command-style "bg=#414868,fg=#c0caf5"

# show pane synchronization status in status bar (center)
set -g status 2
set -g status-format[1] '#[align=centre]#{?pane_synchronized,#[bg=#f7768e]#[fg=#1a1b26]#[bold] 󰓦 SYNC MODE #[default],}#{?#{==:#{prefix},None},#[bg=#ff9e64]#[fg=#1a1b26]#[bold]  PREFIX DISABLED #[default],}'
